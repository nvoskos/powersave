<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerSave Dashboard - Waste Fee Tracking & Gamification</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #2563eb 0%, #16a34a 100%); }
        .gradient-text { background: linear-gradient(to right, #2563eb, #16a34a); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 20px rgba(37, 99, 235, 0.5); } 50% { box-shadow: 0 0 40px rgba(22, 163, 74, 0.8); } }
        .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        .float { animation: float 3s ease-in-out infinite; }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(0,0,0,0.15); }
        .badge { transition: all 0.2s ease; }
        .badge:hover { transform: scale(1.1); }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 via-blue-50 to-green-50">

    <!-- Navigation -->
    <nav class="bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center gap-3">
                    <div class="gradient-bg p-2 rounded-lg">
                        <i data-lucide="zap" class="w-6 h-6 text-white"></i>
                    </div>
                    <div>
                        <span class="font-black text-lg text-gray-900">POWERSAVE</span>
                        <span class="block text-xs text-gray-500">Dashboard</span>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <button id="refreshBtn" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <i data-lucide="refresh-cw" class="w-5 h-5 text-gray-600"></i>
                    </button>
                    <div class="flex items-center gap-2 bg-green-50 px-4 py-2 rounded-full">
                        <i data-lucide="leaf" class="w-4 h-4 text-green-600"></i>
                        <span class="text-sm font-semibold text-green-800" id="totalSavings">0 kWh</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Hero Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <!-- Main Balance Card -->
            <div class="md:col-span-2 bg-gradient-to-br from-blue-600 to-green-600 rounded-2xl p-8 text-white shadow-2xl pulse-glow">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <p class="text-blue-100 text-sm font-medium mb-1">Waste Wallet Balance</p>
                        <h2 class="text-5xl font-black mb-2">‚Ç¨<span id="walletBalance">46.25</span></h2>
                        <p class="text-blue-100 text-sm">of ‚Ç¨<span id="annualTarget">185.00</span> annual goal</p>
                    </div>
                    <div class="float">
                        <i data-lucide="wallet" class="w-12 h-12 text-white/30"></i>
                    </div>
                </div>
                
                <!-- Progress Bar -->
                <div class="bg-white/20 rounded-full h-4 mb-3 overflow-hidden">
                    <div id="progressBar" class="bg-white h-4 rounded-full transition-all duration-500" style="width: 25%"></div>
                </div>
                
                <div class="flex justify-between text-sm">
                    <span class="text-blue-100">Progress: <span id="progressPercent" class="font-bold text-white">25%</span></span>
                    <span class="text-blue-100">Remaining: ‚Ç¨<span id="remaining" class="font-bold text-white">138.75</span></span>
                </div>
            </div>

            <!-- Today's Savings -->
            <div class="bg-white rounded-2xl p-6 shadow-lg card-hover">
                <div class="flex items-center justify-between mb-4">
                    <i data-lucide="trending-up" class="w-8 h-8 text-green-600"></i>
                    <span class="text-xs font-bold text-green-600 bg-green-50 px-2 py-1 rounded-full">+12%</span>
                </div>
                <p class="text-gray-500 text-sm mb-1">Today's Savings</p>
                <p class="text-3xl font-black text-gray-900">‚Ç¨<span id="todaySavings">2.45</span></p>
                <p class="text-xs text-gray-500 mt-2"><span id="todayKwh">7.2</span> kWh saved</p>
            </div>

            <!-- Current Streak -->
            <div class="bg-white rounded-2xl p-6 shadow-lg card-hover">
                <div class="flex items-center justify-between mb-4">
                    <i data-lucide="flame" class="w-8 h-8 text-orange-600"></i>
                    <span class="text-xs font-bold text-orange-600 bg-orange-50 px-2 py-1 rounded-full">üî• HOT</span>
                </div>
                <p class="text-gray-500 text-sm mb-1">Current Streak</p>
                <p class="text-3xl font-black text-gray-900"><span id="currentStreak">12</span> days</p>
                <p class="text-xs text-gray-500 mt-2">Best: <span id="bestStreak">28</span> days</p>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            
            <!-- Left Column: Charts & Analytics -->
            <div class="lg:col-span-2 space-y-6">
                
                <!-- Savings Chart -->
                <div class="bg-white rounded-2xl p-6 shadow-lg">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-900">Savings Trend</h3>
                        <select id="chartPeriod" class="text-sm border-gray-300 rounded-lg px-3 py-1.5 focus:ring-2 focus:ring-blue-500">
                            <option value="7">Last 7 days</option>
                            <option value="30" selected>Last 30 days</option>
                            <option value="90">Last 90 days</option>
                        </select>
                    </div>
                    <canvas id="savingsChart" height="80"></canvas>
                </div>

                <!-- AI Predictions -->
                <div class="bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-6 shadow-lg border-2 border-purple-200">
                    <div class="flex items-start gap-4">
                        <div class="bg-purple-600 p-3 rounded-xl">
                            <i data-lucide="brain" class="w-6 h-6 text-white"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-lg font-bold text-gray-900 mb-2">ü§ñ AI Predictions</h3>
                            <div class="space-y-3">
                                <div class="bg-white rounded-lg p-4">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm font-semibold text-gray-700">This Month Forecast</span>
                                        <span class="text-sm font-bold text-green-600">‚Ç¨18.50</span>
                                    </div>
                                    <div class="text-xs text-gray-600">Based on your current pace, you'll save <strong>‚Ç¨18.50</strong> this month!</div>
                                </div>
                                
                                <div class="bg-white rounded-lg p-4">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm font-semibold text-gray-700">Goal Achievement</span>
                                        <span class="text-sm font-bold text-blue-600">Oct 2025</span>
                                    </div>
                                    <div class="text-xs text-gray-600">You'll reach your annual goal by <strong>October 2025</strong> üéØ</div>
                                </div>

                                <div class="bg-white rounded-lg p-4">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm font-semibold text-gray-700">Best Saving Time</span>
                                        <span class="text-sm font-bold text-orange-600">6-9 PM</span>
                                    </div>
                                    <div class="text-xs text-gray-600">Peak savings potential during evening hours (6-9 PM)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Baseline Comparison -->
                <div class="bg-white rounded-2xl p-6 shadow-lg">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Consumption vs Baseline</h3>
                    <canvas id="baselineChart" height="60"></canvas>
                    <div class="mt-4 grid grid-cols-2 gap-4">
                        <div class="bg-gray-50 rounded-lg p-3">
                            <p class="text-xs text-gray-500 mb-1">10-Day Baseline</p>
                            <p class="text-2xl font-bold text-gray-900"><span id="baseline">2.5</span> kWh</p>
                        </div>
                        <div class="bg-green-50 rounded-lg p-3">
                            <p class="text-xs text-gray-500 mb-1">Today's Usage</p>
                            <p class="text-2xl font-bold text-green-600"><span id="todayUsage">0.8</span> kWh</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Gamification & Actions -->
            <div class="space-y-6">
                
                <!-- Level & XP -->
                <div class="bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl p-6 shadow-lg text-white">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <p class="text-yellow-100 text-sm font-medium">Your Level</p>
                            <h3 class="text-4xl font-black">Level <span id="userLevel">12</span></h3>
                        </div>
                        <div class="bg-white/20 p-2 rounded-lg">
                            <i data-lucide="trophy" class="w-8 h-8 text-white"></i>
                        </div>
                    </div>
                    
                    <div class="mb-2">
                        <div class="flex justify-between text-sm mb-1">
                            <span>XP Progress</span>
                            <span><span id="currentXp">2,450</span> / <span id="nextLevelXp">3,000</span></span>
                        </div>
                        <div class="bg-white/30 rounded-full h-3 overflow-hidden">
                            <div id="xpBar" class="bg-white h-3 rounded-full transition-all duration-500" style="width: 82%"></div>
                        </div>
                    </div>
                    
                    <p class="text-yellow-100 text-xs">550 XP to Level 13!</p>
                </div>

                <!-- Badges & Achievements -->
                <div class="bg-white rounded-2xl p-6 shadow-lg">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">üèÜ Badges</h3>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="badge bg-gradient-to-br from-yellow-400 to-orange-500 p-3 rounded-xl text-center cursor-pointer">
                            <div class="text-2xl mb-1">üî•</div>
                            <div class="text-xs font-bold text-white">7-Day Streak</div>
                        </div>
                        <div class="badge bg-gradient-to-br from-green-400 to-blue-500 p-3 rounded-xl text-center cursor-pointer">
                            <div class="text-2xl mb-1">üå±</div>
                            <div class="text-xs font-bold text-white">Eco Hero</div>
                        </div>
                        <div class="badge bg-gradient-to-br from-purple-400 to-pink-500 p-3 rounded-xl text-center cursor-pointer">
                            <div class="text-2xl mb-1">‚ö°</div>
                            <div class="text-xs font-bold text-white">Power Saver</div>
                        </div>
                        <div class="badge bg-gradient-to-br from-blue-400 to-cyan-500 p-3 rounded-xl text-center cursor-pointer">
                            <div class="text-2xl mb-1">üíé</div>
                            <div class="text-xs font-bold text-white">Diamond Tier</div>
                        </div>
                        <div class="badge bg-gray-200 p-3 rounded-xl text-center cursor-pointer opacity-50">
                            <div class="text-2xl mb-1">üèÖ</div>
                            <div class="text-xs font-bold text-gray-500">Locked</div>
                        </div>
                        <div class="badge bg-gray-200 p-3 rounded-xl text-center cursor-pointer opacity-50">
                            <div class="text-2xl mb-1">üëë</div>
                            <div class="text-xs font-bold text-gray-500">Locked</div>
                        </div>
                    </div>
                </div>

                <!-- Daily Challenges -->
                <div class="bg-white rounded-2xl p-6 shadow-lg">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">üéØ Daily Challenges</h3>
                    <div class="space-y-3">
                        <div class="bg-green-50 border-2 border-green-200 rounded-lg p-3">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-semibold text-gray-800">Save 5 kWh</span>
                                <span class="text-xs font-bold text-green-600">7.2/5.0 ‚úì</span>
                            </div>
                            <div class="bg-green-200 rounded-full h-2">
                                <div class="bg-green-600 h-2 rounded-full" style="width: 100%"></div>
                            </div>
                            <div class="mt-2 text-xs text-green-700 font-medium">‚úÖ Completed! +100 XP</div>
                        </div>

                        <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-3">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-semibold text-gray-800">Use < 2 kWh today</span>
                                <span class="text-xs font-bold text-blue-600">0.8/2.0</span>
                            </div>
                            <div class="bg-blue-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: 40%"></div>
                            </div>
                            <div class="mt-2 text-xs text-blue-700">In progress... +50 XP</div>
                        </div>

                        <div class="bg-orange-50 border-2 border-orange-200 rounded-lg p-3">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-semibold text-gray-800">Weekend Warrior</span>
                                <span class="text-xs font-bold text-orange-600">1/2 days</span>
                            </div>
                            <div class="bg-orange-200 rounded-full h-2">
                                <div class="bg-orange-600 h-2 rounded-full" style="width: 50%"></div>
                            </div>
                            <div class="mt-2 text-xs text-orange-700">Save on weekends! +150 XP</div>
                        </div>
                    </div>
                </div>

                <!-- Leaderboard -->
                <div class="bg-white rounded-2xl p-6 shadow-lg">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">üèÜ Municipality Leaderboard</h3>
                    <div class="space-y-2">
                        <div class="flex items-center gap-3 p-3 bg-yellow-50 rounded-lg">
                            <span class="text-2xl">ü•á</span>
                            <div class="flex-1">
                                <p class="font-bold text-gray-900 text-sm">Nicosia</p>
                                <p class="text-xs text-gray-500">2,450 kWh saved</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                            <span class="text-2xl">ü•à</span>
                            <div class="flex-1">
                                <p class="font-bold text-gray-900 text-sm">Limassol</p>
                                <p class="text-xs text-gray-500">2,180 kWh saved</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-3 p-3 bg-orange-50 rounded-lg">
                            <span class="text-2xl">ü•â</span>
                            <div class="flex-1">
                                <p class="font-bold text-gray-900 text-sm">Paphos</p>
                                <p class="text-xs text-gray-500">1,950 kWh saved</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-gradient-to-br from-blue-600 to-green-600 rounded-2xl p-6 shadow-lg text-white">
                    <h3 class="text-lg font-bold mb-4">‚ö° Quick Actions</h3>
                    <div class="space-y-2">
                        <button class="w-full bg-white/20 hover:bg-white/30 rounded-lg py-3 px-4 text-left transition-all">
                            <div class="flex items-center gap-3">
                                <i data-lucide="play-circle" class="w-5 h-5"></i>
                                <span class="font-semibold">Start Savings Session</span>
                            </div>
                        </button>
                        <button class="w-full bg-white/20 hover:bg-white/30 rounded-lg py-3 px-4 text-left transition-all">
                            <div class="flex items-center gap-3">
                                <i data-lucide="heart" class="w-5 h-5"></i>
                                <span class="font-semibold">Donate to Solidarity Fund</span>
                            </div>
                        </button>
                        <button class="w-full bg-white/20 hover:bg-white/30 rounded-lg py-3 px-4 text-left transition-all">
                            <div class="flex items-center gap-3">
                                <i data-lucide="share-2" class="w-5 h-5"></i>
                                <span class="font-semibold">Share Progress</span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Analytics Row -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Monthly Breakdown -->
            <div class="bg-white rounded-2xl p-6 shadow-lg">
                <h3 class="text-lg font-bold text-gray-900 mb-4">üìÖ Monthly Breakdown</h3>
                <canvas id="monthlyChart" height="200"></canvas>
            </div>

            <!-- Savings Distribution -->
            <div class="bg-white rounded-2xl p-6 shadow-lg">
                <h3 class="text-lg font-bold text-gray-900 mb-4">ü•ß Savings Distribution</h3>
                <canvas id="distributionChart" height="200"></canvas>
            </div>

            <!-- Social Impact -->
            <div class="bg-white rounded-2xl p-6 shadow-lg">
                <h3 class="text-lg font-bold text-gray-900 mb-4">üåç Social Impact</h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                        <div class="flex items-center gap-2">
                            <i data-lucide="users" class="w-5 h-5 text-green-600"></i>
                            <span class="text-sm font-medium text-gray-700">Families Helped</span>
                        </div>
                        <span class="text-xl font-bold text-green-600">12</span>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                        <div class="flex items-center gap-2">
                            <i data-lucide="tree-pine" class="w-5 h-5 text-blue-600"></i>
                            <span class="text-sm font-medium text-gray-700">CO‚ÇÇ Reduced</span>
                        </div>
                        <span class="text-xl font-bold text-blue-600">234 kg</span>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg">
                        <div class="flex items-center gap-2">
                            <i data-lucide="globe" class="w-5 h-5 text-purple-600"></i>
                            <span class="text-sm font-medium text-gray-700">Grid Stability</span>
                        </div>
                        <span class="text-xl font-bold text-purple-600">+8%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Mock data
        const dashboardData = {
            walletBalance: 46.25,
            annualTarget: 185.00,
            todaySavings: 2.45,
            todayKwh: 7.2,
            currentStreak: 12,
            bestStreak: 28,
            baseline: 2.5,
            todayUsage: 0.8,
            userLevel: 12,
            currentXp: 2450,
            nextLevelXp: 3000
        };

        // Update dashboard
        function updateDashboard() {
            document.getElementById('walletBalance').textContent = dashboardData.walletBalance.toFixed(2);
            document.getElementById('annualTarget').textContent = dashboardData.annualTarget.toFixed(2);
            document.getElementById('todaySavings').textContent = dashboardData.todaySavings.toFixed(2);
            document.getElementById('todayKwh').textContent = dashboardData.todayKwh.toFixed(1);
            document.getElementById('currentStreak').textContent = dashboardData.currentStreak;
            document.getElementById('bestStreak').textContent = dashboardData.bestStreak;
            document.getElementById('baseline').textContent = dashboardData.baseline.toFixed(1);
            document.getElementById('todayUsage').textContent = dashboardData.todayUsage.toFixed(1);
            document.getElementById('userLevel').textContent = dashboardData.userLevel;
            document.getElementById('currentXp').textContent = dashboardData.currentXp.toLocaleString();
            document.getElementById('nextLevelXp').textContent = dashboardData.nextLevelXp.toLocaleString();
            document.getElementById('totalSavings').textContent = (dashboardData.todayKwh * 30).toFixed(0) + ' kWh';

            const progress = (dashboardData.walletBalance / dashboardData.annualTarget) * 100;
            const remaining = Math.max(0, dashboardData.annualTarget - dashboardData.walletBalance);
            
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressPercent').textContent = progress.toFixed(0) + '%';
            document.getElementById('remaining').textContent = remaining.toFixed(2);

            const xpProgress = (dashboardData.currentXp / dashboardData.nextLevelXp) * 100;
            document.getElementById('xpBar').style.width = xpProgress + '%';
        }

        // Savings Trend Chart
        const savingsCtx = document.getElementById('savingsChart').getContext('2d');
        const savingsChart = new Chart(savingsCtx, {
            type: 'line',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'kWh Saved',
                    data: [6.5, 5.8, 7.2, 6.9, 8.1, 9.5, 8.7],
                    borderColor: 'rgb(34, 197, 94)',
                    backgroundColor: 'rgba(34, 197, 94, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        // Baseline Comparison Chart
        const baselineCtx = document.getElementById('baselineChart').getContext('2d');
        const baselineChart = new Chart(baselineCtx, {
            type: 'bar',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [
                    {
                        label: 'Baseline',
                        data: [2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5],
                        backgroundColor: 'rgba(156, 163, 175, 0.5)'
                    },
                    {
                        label: 'Actual Usage',
                        data: [1.2, 1.5, 0.9, 1.1, 0.8, 1.8, 1.3],
                        backgroundColor: 'rgba(34, 197, 94, 0.8)'
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: true } }
            }
        });

        // Monthly Chart
        const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
        const monthlyChart = new Chart(monthlyCtx, {
            type: 'bar',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: '‚Ç¨ Saved',
                    data: [12, 15, 18, 14, 16, 19],
                    backgroundColor: 'rgba(59, 130, 246, 0.8)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });

        // Distribution Chart
        const distributionCtx = document.getElementById('distributionChart').getContext('2d');
        const distributionChart = new Chart(distributionCtx, {
            type: 'doughnut',
            data: {
                labels: ['Waste Fees', 'Solidarity', 'Savings'],
                datasets: [{
                    data: [65, 20, 15],
                    backgroundColor: [
                        'rgba(59, 130, 246, 0.8)',
                        'rgba(34, 197, 94, 0.8)',
                        'rgba(249, 115, 22, 0.8)'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });

        // Initialize
        updateDashboard();

        // Refresh button
        document.getElementById('refreshBtn').addEventListener('click', () => {
            location.reload();
        });
    </script>
</body>
</html>
